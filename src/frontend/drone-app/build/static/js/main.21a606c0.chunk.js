(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{62:function(e,t,n){e.exports=n(93)},67:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(31),c=n.n(l);n(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(25),u=n(24),i=n(12),s=n.n(i),d=n(22),m=n(5),p=n(4),h=n(7),f=n(6),E=n(3),v=n(8),b=n(56),g=n.n(b),w=n(40),x=n.n(w),j=n(41),y=n.n(j),O=n(57),k=n.n(O),F=n(59),M=n.n(F),S=n(58),H=n.n(S),_="",B="/api/drones";function D(){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_+B);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_+B,{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_+B+"/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e){var t=e.uuid,n=e.latitude,a=e.longitude,l=e.data_timestamp,c=e.curr_speed,u=e.is_moving,i=e.move_timestamp;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{to:"/drones/".concat(t)},t)),r.a.createElement("td",null,n.toFixed(3)),r.a.createElement("td",null,a.toFixed(3)),r.a.createElement("td",null,l),r.a.createElement("td",null,c.toFixed(3)),r.a.createElement("td",null,u?"\u2713":"\u2716"),r.a.createElement("td",null,i)))}var N=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={drone_list:[],update:2e3,spinner:!1},n.droneListUpdateHandler=n.droneListUpdateHandler.bind(Object(E.a)(n)),n.addButtonHandler=n.addButtonHandler.bind(Object(E.a)(n)),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"toggleSpinner",value:function(){this.setState({spinner:!this.state.spinner})}},{key:"addButtonHandler",value:function(){var e=Object(d.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.toggleSpinner(),e.next=3,J();case 3:t=e.sent,this.toggleSpinner(),null!=t.uuid&&console.log("Drone Created");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"droneListUpdateHandler",value:function(){var e=Object(d.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=(t=e.sent).map(A),this.setState({drone_list:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.timer=setInterval(this.droneListUpdateHandler,this.state.update)}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(x.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"m-2"},r.a.createElement(k.a,{disabled:this.state.spinner,onClick:this.addButtonHandler},this.state.spinner?r.a.createElement(H.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):r.a.createElement(r.a.Fragment,null)," Add Drone")))),r.a.createElement(x.a,null,r.a.createElement(y.a,null,r.a.createElement(M.a,{responsive:"xl"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"UUID"),r.a.createElement("th",null,"Latitude"),r.a.createElement("th",null,"Longitude"),r.a.createElement("th",null,"Data Timestamp"),r.a.createElement("th",null,"Speed (m/s)"),r.a.createElement("th",null,"Moving"),r.a.createElement("th",null,"Move Timestamp"))),this.state.drone_list.length>0?this.state.drone_list:r.a.createElement(r.a.Fragment,null)))))}}]),t}(r.a.Component),T=n(42),V=n(9),W=n(44);n(76);function X(e,t,n,a){function r(e){return e*Math.PI/180}var l=r(a-t),c=r(n-e),o=Math.sin(l/2)*Math.sin(l/2)+Math.cos(r(t))*Math.cos(r(a))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}var q=n(61),z=n(38);n(49).config();var G="pk.eyJ1IjoiYmF0dGVyeWNoYXJnZXIiLCJhIjoiY2sxdXAxMWV1MGQ1ZDNucXVtcGo4emlobSJ9.inK45HvAdqwtHdbMsbNdOw",Y={color:"#FFFFFF"},P=z.a,Z="mapbox://styles/mapbox/dark-v9";function K(e){var t=e.match.params.uuid,n=Object(a.useState)({latitude:0,longitude:0}),l=Object(V.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)({width:"100%",height:800,latitude:0,longitude:0,zoom:16}),i=Object(V.a)(u,2),m=i[0],p=i[1];Object(q.a)(Object(d.a)(s.a.mark(function e(){var n,a,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:n=e.sent,a=n.latitude,r=n.longitude,o({latitude:a,longitude:r}),l=X(m.longitude,m.latitude,r,a),console.log(l,m.latitude,m.longitude,a,r),l>10&&p(Object(T.a)({},m,{latitude:n.latitude,longitude:n.longitude,zoom:16})),console.log(t,n,m,c);case 10:case"end":return e.stop()}},e)})),500);return r.a.createElement(W.b,Object.assign({},m,{mapStyle:Z,onViewportChange:function(e){return p(Object(T.a)({},e))},mapboxApiAccessToken:G}),r.a.createElement(W.a,c,r.a.createElement(P,{style:Y}),r.a.createElement("p",{style:Y},t)))}var Q=n(43),$=n.n(Q);c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null,r.a.createElement(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{bg:"dark"},r.a.createElement($.a.Brand,null,r.a.createElement(o.b,{to:"/"},"Dronesy"))))},null),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{exact:!0,path:"/",component:N}),r.a.createElement(u.a,{exact:!0,path:"/drones",component:N}),r.a.createElement(u.a,{exact:!0,path:"/drones/:uuid",component:K}))},null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),n(49).config()}},[[62,1,2]]]);
//# sourceMappingURL=main.21a606c0.chunk.js.map